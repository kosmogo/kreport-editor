<!DOCTYPE html>  <html> <head>   <title>main.coffee</title>   <meta http-equiv="content-type" content="text/html; charset=UTF-8">   <link rel="stylesheet" media="all" href="docco.css" /> </head> <body>   <div id="container">     <div id="background"></div>          <table cellpadding="0" cellspacing="0">       <thead>         <tr>           <th class="docs">             <h1>               main.coffee             </h1>           </th>           <th class="code">           </th>         </tr>       </thead>       <tbody>                               <tr id="section-1">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-1">&#182;</a>               </div>               <p>Core object of the KReportEditor.</p>             </td>             <td class="code">               <div class="highlight"><pre><span class="k">class</span> <span class="nx">KReportEditor</span> <span class="k">extends</span> <span class="nx">Cafeine</span><span class="p">.</span><span class="nx">ActiveObject</span></pre></div>             </td>           </tr>                               <tr id="section-2">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-2">&#182;</a>               </div>               <p>Paper format constants</p>             </td>             <td class="code">               <div class="highlight"><pre>  <span class="nv">FORMATS =</span>
    <span class="nv">A4: </span><span class="p">[</span><span class="s">&#39;21cm&#39;</span><span class="p">,</span> <span class="s">&#39;29.7cm&#39;</span><span class="p">]</span>
  <span class="nv">KNOWS_FORMATS = </span><span class="p">[</span><span class="s">&#39;A4&#39;</span><span class="p">]</span></pre></div>             </td>           </tr>                               <tr id="section-3">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-3">&#182;</a>               </div>               <p>Using of useful <a href="http://github.com/anykeyh/cafeine">cafeine</a> class macros</p>             </td>             <td class="code">               <div class="highlight"><pre>  <span class="nx">@include</span> <span class="nx">Cafeine</span><span class="p">.</span><span class="nx">Plugin</span><span class="p">,</span> <span class="nx">Cafeine</span><span class="p">.</span><span class="nx">Editable</span><span class="p">,</span> <span class="nx">Cafeine</span><span class="p">.</span><span class="nx">Observable</span></pre></div>             </td>           </tr>                               <tr id="section-4">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-4">&#182;</a>               </div>               <p>Here to deploy this class as jquery report.</p>             </td>             <td class="code">               <div class="highlight"><pre>  <span class="nx">@jquery_plugin</span> <span class="s">&quot;kreport&quot;</span></pre></div>             </td>           </tr>                               <tr id="section-5">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-5">&#182;</a>               </div>               <p>This class is observable through save action.</p>             </td>             <td class="code">               <div class="highlight"><pre>  <span class="nx">@observable</span> <span class="s">&#39;save&#39;</span></pre></div>             </td>           </tr>                               <tr id="section-6">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-6">&#182;</a>               </div>               <p>And we set document parameters</p>             </td>             <td class="code">               <div class="highlight"><pre>  <span class="nv">margin_top: </span><span class="s">&#39;1cm&#39;</span>
  <span class="nv">margin_bottom: </span><span class="s">&#39;1cm&#39;</span>
  <span class="nv">margin_left: </span><span class="s">&#39;1cm&#39;</span>
  <span class="nv">margin_right: </span><span class="s">&#39;1cm&#39;</span>
  <span class="nv">name: </span><span class="s">&#39;untitled report&#39;</span></pre></div>             </td>           </tr>                               <tr id="section-7">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-7">&#182;</a>               </div>               <p>Format is a compound object</p>             </td>             <td class="code">               <div class="highlight"><pre>  <span class="nx">@attr</span> <span class="s">&#39;format&#39;</span><span class="p">,</span>
    <span class="nv">get: </span><span class="o">-&gt;</span> <span class="k">return</span> <span class="nx">@_format</span>
    <span class="nv">set: </span><span class="nf">(value) -&gt;</span>
      <span class="nv">vals = </span><span class="nx">KNOWS_FORMAT</span><span class="p">[</span><span class="nx">value</span><span class="p">]</span>
      <span class="nx">vals</span> <span class="o">?=</span> <span class="p">[</span><span class="s">&#39;500px&#39;</span><span class="p">,</span> <span class="s">&#39;800px&#39;</span><span class="p">]</span>
      <span class="vi">@height = </span><span class="nx">vals</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
      <span class="vi">@width = </span><span class="nx">vals</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span></pre></div>             </td>           </tr>                               <tr id="section-8">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-8">&#182;</a>               </div>               <p>Menu hierarchy</p>             </td>             <td class="code">               <div class="highlight"><pre>  <span class="nv">MENUS =</span>
    <span class="nv">File:</span>
      <span class="nv">New: </span><span class="s">&quot;new&quot;</span>
      <span class="nv">Load: </span><span class="s">&quot;load&quot;</span>
      <span class="nv">Save: </span><span class="s">&quot;save&quot;</span>
      <span class="nv">hr1: </span><span class="s">&#39;***&#39;</span>
      <span class="s">&#39;Properties...&#39;</span><span class="o">:</span> <span class="s">&#39;properties&#39;</span>
    <span class="nv">Edit:</span>
      <span class="nv">Undo: </span><span class="s">&#39;undo&#39;</span>
      <span class="nv">Redo: </span><span class="s">&#39;redo&#39;</span></pre></div>             </td>           </tr>                               <tr id="section-9">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-9">&#182;</a>               </div>               <p>Set the parameters as editables.</p>             </td>             <td class="code">               <div class="highlight"><pre>  <span class="nx">@editable</span> <span class="p">{</span>
    <span class="s">&#39;name&#39;</span><span class="o">:</span>
      <span class="nv">label: </span><span class="s">&#39;Name&#39;</span>
      <span class="nv">type: </span><span class="s">&#39;string&#39;</span>
    <span class="s">&#39;format&#39;</span><span class="o">:</span>
      <span class="nv">label: </span><span class="s">&#39;Format&#39;</span>
      <span class="nv">type: </span><span class="nx">KNOWS_FORMATS</span>
    <span class="s">&#39;margin_top&#39;</span><span class="o">:</span>
      <span class="nv">label: </span><span class="s">&#39;Margin Top (cm)&#39;</span>
      <span class="nv">type: </span><span class="s">&#39;number&#39;</span>
    <span class="s">&#39;margin_bottom&#39;</span><span class="o">:</span>
      <span class="nv">label: </span><span class="s">&#39;Margin Bottom (cm)&#39;</span>
      <span class="nv">type: </span><span class="s">&#39;number&#39;</span>
    <span class="s">&#39;margin_left&#39;</span><span class="o">:</span>
      <span class="nv">label: </span><span class="s">&#39;Margin Left (cm)&#39;</span>
      <span class="nv">type: </span><span class="s">&#39;number&#39;</span>
    <span class="s">&#39;margin_right&#39;</span><span class="o">:</span>
      <span class="nv">label: </span><span class="s">&#39;Margin Right (cm)&#39;</span>
      <span class="nv">type: </span><span class="s">&#39;number&#39;</span>
  <span class="p">}</span></pre></div>             </td>           </tr>                               <tr id="section-10">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-10">&#182;</a>               </div>               <p>Action callbacks.
We check if the action exists in the class.
Else we put a warning.</p>             </td>             <td class="code">               <div class="highlight"><pre>  <span class="nv">when_action: </span><span class="nf">(name) -&gt;</span>
    <span class="k">if</span> <span class="nx">@</span><span class="p">[</span><span class="s">&quot;_when_action_</span><span class="si">#{</span><span class="nx">name</span><span class="si">}</span><span class="s">&quot;</span><span class="p">]</span><span class="o">?</span>
      <span class="nx">@</span><span class="p">[</span><span class="s">&quot;_when_action_</span><span class="si">#{</span><span class="nx">name</span><span class="si">}</span><span class="s">&quot;</span><span class="p">]()</span>
      <span class="k">return</span> <span class="kc">true</span>
    <span class="k">else</span>
      <span class="nx">console</span><span class="p">.</span><span class="nx">log</span> <span class="s">&quot;UNIMPLEMENTED ACTION: </span><span class="si">#{</span><span class="nx">name</span><span class="si">}</span><span class="s">&quot;</span>
      <span class="k">return</span> <span class="kc">false</span></pre></div>             </td>           </tr>                               <tr id="section-11">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-11">&#182;</a>               </div>               <p>Here we implement actions methods.</p>             </td>             <td class="code">               <div class="highlight"><pre>  <span class="nv">_when_action_save: </span><span class="o">-&gt;</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span> <span class="s">&quot;we save!&quot;</span>

  <span class="nv">_when_action_properties: </span> <span class="o">-&gt;</span>
    <span class="nv">form = </span><span class="nx">@create_edit_form</span><span class="p">()</span>

    <span class="nx">@show_dialog</span> <span class="s">&quot;Document properties&quot;</span><span class="p">,</span>
      <span class="nv">content: </span><span class="nx">form</span>
      <span class="nv">buttons:</span>
        <span class="s">&quot;Accept&quot;</span><span class="o">:</span>
          <span class="k">class</span><span class="o">:</span> <span class="s">&quot;btn-primary&quot;</span>
          <span class="nv">click: </span><span class="o">-&gt;</span>
            <span class="nx">console</span><span class="p">.</span><span class="nx">log</span> <span class="s">&quot;accept clicked&quot;</span>
        <span class="s">&quot;Cancel&quot;</span><span class="o">:</span>
          <span class="nv">click: </span><span class="o">-&gt;</span>
            <span class="nx">console</span><span class="p">.</span><span class="nx">log</span> <span class="s">&quot;cancel clicked&quot;</span></pre></div>             </td>           </tr>                               <tr id="section-12">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-12">&#182;</a>               </div>               <p>This will generate the menu bar according to the hierarchy into MENUS constant.
Sample architecture:</p>

<pre><code> &lt;div class="navbar"&gt;
  &lt;div class="navbar-inner"&gt;
    &lt;a class="brand" href="#"&gt;KReport&lt;/a&gt;
    &lt;ul class="nav"&gt;
      &lt;li class="dropdown"&gt;
        &lt;a class="dropdown-toggle" data-toggle="dropdown" href="#"&gt;File&lt;b class="caret"&gt;&lt;/b&gt;&lt;/a&gt;
        &lt;ul class="dropdown-menu" role="menu" aria-labelledby="dLabel"&gt;
          &lt;li&gt;&lt;a tabindex="-1" href="#"&gt;Load&lt;/a&gt;&lt;/li&gt;
          &lt;li&gt;&lt;a tabindex="-1" href="#"&gt;Save&lt;/a&gt;&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/div&gt;
 &lt;/div&gt;
</code></pre>             </td>             <td class="code">               <div class="highlight"><pre>  <span class="nv">generate_menu_bar: </span><span class="o">-&gt;</span>
    <span class="vi">@navbar = </span><span class="nx">$</span><span class="p">(</span><span class="nb">document</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span><span class="s">&#39;div&#39;</span><span class="p">)).</span><span class="nx">attr</span><span class="p">(</span><span class="k">class</span><span class="o">:</span> <span class="s">&#39;navbar kreport-navbar&#39;</span><span class="p">)</span>

    <span class="nv">navbar_inner = </span><span class="nx">$</span><span class="p">(</span><span class="nb">document</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span><span class="s">&#39;div&#39;</span><span class="p">)).</span><span class="nx">attr</span><span class="p">(</span><span class="k">class</span><span class="o">:</span> <span class="s">&#39;navbar-inner&#39;</span><span class="p">)</span>

    <span class="nx">@navbar</span><span class="p">.</span><span class="nx">append</span><span class="p">(</span><span class="nx">navbar_inner</span><span class="p">)</span>

    <span class="nv">brand = </span><span class="nx">$</span><span class="p">(</span><span class="nb">document</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span><span class="s">&#39;a&#39;</span><span class="p">)).</span><span class="nx">attr</span><span class="p">({</span> <span class="k">class</span><span class="o">:</span> <span class="s">&#39;brand&#39;</span><span class="p">,</span> <span class="nv">href: </span><span class="s">&#39;#&#39;</span> <span class="p">}).</span><span class="nx">text</span><span class="p">(</span><span class="s">&#39;KReport&#39;</span><span class="p">)</span>
    <span class="nv">nav = </span><span class="nx">$</span><span class="p">(</span><span class="nb">document</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span><span class="s">&#39;ul&#39;</span><span class="p">)).</span><span class="nx">attr</span><span class="p">(</span><span class="k">class</span><span class="o">:</span> <span class="s">&#39;nav&#39;</span><span class="p">)</span>

    <span class="nx">$</span><span class="p">(</span><span class="nx">navbar_inner</span><span class="p">).</span><span class="nx">append</span><span class="p">([</span><span class="nx">brand</span><span class="p">,</span> <span class="nx">nav</span><span class="p">])</span>

    <span class="k">for</span> <span class="nx">k</span><span class="p">,</span><span class="nx">v</span> <span class="k">of</span> <span class="nx">MENUS</span>
      <span class="nv">dd = </span><span class="nx">$</span><span class="p">(</span><span class="nb">document</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span><span class="s">&#39;li&#39;</span><span class="p">)).</span><span class="nx">attr</span><span class="p">(</span><span class="k">class</span><span class="o">:</span> <span class="s">&#39;dropdown&#39;</span><span class="p">)</span>
      <span class="nx">nav</span><span class="p">.</span><span class="nx">append</span> <span class="nx">dd</span>
      <span class="nx">dd</span><span class="p">.</span><span class="nx">append</span> <span class="nx">$</span><span class="p">(</span><span class="nb">document</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span><span class="s">&#39;a&#39;</span><span class="p">)).</span><span class="nx">attr</span><span class="p">(</span><span class="k">class</span><span class="o">:</span> <span class="s">&#39;dropdown-toggle&#39;</span><span class="p">,</span> <span class="s">&#39;data-toggle&#39;</span><span class="o">:</span> <span class="s">&#39;dropdown&#39;</span><span class="p">,</span> <span class="s">&#39;href&#39;</span><span class="o">:</span> <span class="s">&#39;#&#39;</span><span class="p">).</span><span class="nx">html</span><span class="p">(</span><span class="nx">k</span> <span class="o">+</span> <span class="s">&#39;&lt;b class=&quot;caret&quot;&gt;&lt;/b&gt;&#39;</span><span class="p">)</span>
      <span class="nv">dd_ul = </span><span class="nx">$</span><span class="p">(</span><span class="nb">document</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span><span class="s">&#39;ul&#39;</span><span class="p">)).</span><span class="nx">attr</span><span class="p">(</span><span class="k">class</span><span class="o">:</span> <span class="s">&#39;dropdown-menu&#39;</span><span class="p">,</span> <span class="nx">role</span><span class="o">:</span><span class="s">&#39;menu&#39;</span><span class="p">,</span> <span class="s">&#39;aria-labelledby&#39;</span><span class="o">:</span> <span class="s">&#39;dLabel&#39;</span><span class="p">)</span>
      <span class="nx">dd</span><span class="p">.</span><span class="nx">append</span> <span class="nx">dd_ul</span>
      <span class="k">if</span> <span class="k">typeof</span> <span class="nx">v</span> <span class="o">is</span> <span class="s">&#39;object&#39;</span>
        <span class="k">for</span> <span class="nx">k2</span><span class="p">,</span><span class="nx">v2</span> <span class="k">of</span> <span class="nx">v</span>
          <span class="nx">do</span><span class="p">(</span><span class="nx">k</span><span class="o">=</span><span class="nx">k</span><span class="p">,</span> <span class="nx">v</span><span class="o">=</span><span class="nx">v</span><span class="p">,</span> <span class="nx">k2</span><span class="o">=</span><span class="nx">k2</span><span class="p">,</span> <span class="nx">v2</span><span class="o">=</span><span class="nx">v2</span><span class="p">)</span> <span class="o">=&gt;</span></pre></div>             </td>           </tr>                               <tr id="section-13">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-13">&#182;</a>               </div>               <p>Special case when we want a divider.</p>             </td>             <td class="code">               <div class="highlight"><pre>            <span class="k">if</span> <span class="nx">v2</span> <span class="o">is</span> <span class="s">&#39;***&#39;</span>
              <span class="nv">dd_li = </span><span class="nx">$</span><span class="p">(</span><span class="nb">document</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span><span class="s">&#39;li&#39;</span><span class="p">)).</span><span class="nx">attr</span><span class="p">(</span><span class="k">class</span><span class="o">:</span> <span class="s">&#39;divider&#39;</span><span class="p">)</span>
              <span class="nx">dd_ul</span><span class="p">.</span><span class="nx">append</span> <span class="nx">dd_li</span>
            <span class="k">else</span></pre></div>             </td>           </tr>                               <tr id="section-14">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-14">&#182;</a>               </div>               <p>We put a <code>do =&gt; =&gt;</code> because we need to output a function which return a function, to keep v2 as internal to function
 FYI it can be translated <code>do =&gt; return =&gt; ...</code> which is better to read?.</p>             </td>             <td class="code">               <div class="highlight"><pre>              <span class="nv">dd_li = </span><span class="nx">$</span><span class="p">(</span><span class="nb">document</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span><span class="s">&#39;li&#39;</span><span class="p">))</span>
              <span class="p">.</span><span class="nx">append</span><span class="p">(</span>
                <span class="nx">$</span><span class="p">(</span><span class="nb">document</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span><span class="s">&#39;a&#39;</span><span class="p">)).</span><span class="nx">attr</span><span class="p">(</span><span class="nv">tabindex: </span><span class="s">&#39;-1&#39;</span><span class="p">,</span> <span class="nv">href: </span><span class="s">&#39;#&#39;</span><span class="p">).</span><span class="nx">click</span><span class="p">(</span> <span class="nx">do</span> <span class="o">=&gt;</span> <span class="o">=&gt;</span> <span class="nx">@when_action</span><span class="p">(</span><span class="nx">v2</span><span class="p">)</span>  <span class="p">).</span><span class="nx">text</span><span class="p">(</span><span class="nx">k2</span><span class="p">)</span>
              <span class="p">)</span>
              <span class="nx">dd_ul</span><span class="p">.</span><span class="nx">append</span> <span class="nx">dd_li</span>

    <span class="k">return</span> <span class="nx">@navbar</span>

  <span class="nv">resize: </span><span class="o">-&gt;</span>
    <span class="nx">@content</span><span class="p">.</span><span class="nx">css</span> <span class="nv">height: </span><span class="nx">@content</span><span class="p">.</span><span class="nx">height</span><span class="p">()</span> <span class="o">-</span>  <span class="nx">@navbar</span><span class="p">.</span><span class="nx">height</span><span class="p">()</span></pre></div>             </td>           </tr>                               <tr id="section-15">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-15">&#182;</a>               </div>               <p>Dialog handling.</p>             </td>             <td class="code">               <div class="highlight"><pre>  <span class="nv">init_dialog: </span><span class="o">-&gt;</span></pre></div>             </td>           </tr>                               <tr id="section-16">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-16">&#182;</a>               </div>               <div class="modal-header">
 <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
 <h3>Modal header</h3>
</div>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="vi">@dialog_title = </span><span class="nx">$</span><span class="p">(</span><span class="nb">document</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span><span class="s">&#39;h3&#39;</span><span class="p">))</span>
    <span class="vi">@dialog_header = </span><span class="nx">$</span><span class="p">(</span><span class="nb">document</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span><span class="s">&#39;div&#39;</span><span class="p">)).</span><span class="nx">attr</span><span class="p">(</span><span class="k">class</span><span class="o">:</span> <span class="s">&#39;modal-header&#39;</span><span class="p">).</span><span class="nx">append</span><span class="p">([</span>
      <span class="nx">$</span><span class="p">(</span><span class="nb">document</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span><span class="s">&#39;button&#39;</span><span class="p">)).</span><span class="nx">attr</span><span class="p">(</span><span class="nv">type: </span><span class="s">&#39;button&#39;</span><span class="p">,</span> <span class="k">class</span><span class="o">:</span> <span class="s">&#39;close&#39;</span><span class="p">,</span> <span class="s">&#39;data-dismiss&#39;</span><span class="o">:</span><span class="s">&#39;modal&#39;</span><span class="p">,</span> <span class="s">&#39;aria-hidden&#39;</span><span class="o">:</span><span class="s">&#39;true&#39;</span><span class="p">).</span><span class="nx">html</span><span class="p">(</span><span class="s">&quot;&amp;times;&quot;</span><span class="p">)</span>
      <span class="nx">@dialog_title</span>
    <span class="p">])</span>

    <span class="vi">@dialog_content = </span><span class="nx">$</span><span class="p">(</span><span class="nb">document</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span><span class="s">&#39;div&#39;</span><span class="p">)).</span><span class="nx">attr</span><span class="p">(</span><span class="k">class</span><span class="o">:</span> <span class="s">&#39;modal-body&#39;</span><span class="p">)</span>
    <span class="vi">@dialog_footer = </span><span class="nx">$</span><span class="p">(</span><span class="nb">document</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span><span class="s">&#39;div&#39;</span><span class="p">)).</span><span class="nx">attr</span><span class="p">(</span><span class="k">class</span><span class="o">:</span> <span class="s">&#39;modal-footer&#39;</span><span class="p">)</span>

    <span class="vi">@dialog = </span><span class="nx">$</span><span class="p">(</span><span class="nb">document</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span><span class="s">&#39;div&#39;</span><span class="p">)).</span><span class="nx">attr</span><span class="p">(</span><span class="k">class</span><span class="o">:</span> <span class="s">&#39;modal&#39;</span><span class="p">).</span><span class="nx">css</span><span class="p">(</span><span class="nv">display: </span><span class="s">&#39;none&#39;</span><span class="p">)</span>
    <span class="nx">@dialog</span><span class="p">.</span><span class="nx">append</span> <span class="p">[</span><span class="nx">@dialog_header</span><span class="p">,</span> <span class="nx">@dialog_content</span><span class="p">,</span> <span class="nx">@dialog_footer</span><span class="p">]</span>
    <span class="k">return</span> <span class="nx">@dialog</span>
  <span class="nv">show_dialog: </span><span class="nf">(title, content) -&gt;</span>
    <span class="nx">@dialog_title</span><span class="p">.</span><span class="nx">text</span><span class="p">(</span><span class="nx">title</span><span class="p">)</span>
    <span class="nx">@dialog</span><span class="p">.</span><span class="nx">css</span><span class="p">(</span><span class="nv">display: </span><span class="s">&#39;block&#39;</span><span class="p">).</span><span class="nx">modal</span><span class="p">()</span>
    <span class="nx">@dialog_content</span><span class="p">.</span><span class="nx">empty</span><span class="p">().</span><span class="nx">append</span><span class="p">(</span><span class="nx">content</span><span class="p">)</span>
  <span class="nv">hide_dialog: </span><span class="o">-&gt;</span>
    <span class="nx">@dialog</span><span class="p">.</span><span class="nx">css</span><span class="p">(</span><span class="nv">display: </span><span class="s">&#39;none&#39;</span><span class="p">)</span>

  <span class="nv">constructor: </span><span class="nf">(element) -&gt;</span></pre></div>             </td>           </tr>                               <tr id="section-17">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-17">&#182;</a>               </div>               <p>We build the main element structure</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="vi">@element = </span><span class="nx">$</span> <span class="nx">element</span>
    <span class="nx">@element</span><span class="p">.</span><span class="nx">empty</span><span class="p">()</span>
    <span class="nx">@element</span><span class="p">.</span><span class="nx">append</span><span class="p">(</span><span class="nx">@generate_menu_bar</span><span class="p">())</span>

    <span class="vi">@content = </span><span class="nx">$</span><span class="p">(</span><span class="nb">document</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span><span class="s">&#39;div&#39;</span><span class="p">)).</span><span class="nx">attr</span><span class="p">(</span><span class="nv">id: </span><span class="s">&#39;kreport-content&#39;</span><span class="p">)</span>
    <span class="nx">@element</span><span class="p">.</span><span class="nx">append</span><span class="p">(</span><span class="nx">@content</span><span class="p">)</span>

    <span class="vi">@canvas = </span><span class="nx">$</span><span class="p">(</span><span class="nb">document</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span><span class="s">&#39;div&#39;</span><span class="p">)).</span><span class="nx">attr</span><span class="p">(</span><span class="nv">id: </span><span class="s">&#39;kreport-canvas&#39;</span><span class="p">)</span>
    <span class="vi">@toolbox = </span><span class="nx">$</span><span class="p">(</span><span class="nb">document</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span><span class="s">&#39;div&#39;</span><span class="p">)).</span><span class="nx">attr</span><span class="p">(</span><span class="nv">id: </span><span class="s">&#39;kreport-toolbox&#39;</span><span class="p">)</span>
    <span class="nx">@content</span><span class="p">.</span><span class="nx">append</span> <span class="p">[</span><span class="nx">@toolbox</span><span class="p">,</span> <span class="nx">@canvas</span><span class="p">]</span>
    <span class="nx">@element</span><span class="p">.</span><span class="nx">append</span> <span class="nx">@content</span>

    <span class="vi">@page = </span><span class="nx">$</span><span class="p">(</span><span class="nb">document</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span><span class="s">&#39;div&#39;</span><span class="p">)).</span><span class="nx">attr</span><span class="p">(</span><span class="nv">id: </span><span class="s">&#39;kreport-page&#39;</span><span class="p">)</span>
    <span class="vi">@page_content = </span> <span class="nx">$</span><span class="p">(</span><span class="nb">document</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span><span class="s">&#39;div&#39;</span><span class="p">)).</span><span class="nx">attr</span><span class="p">(</span><span class="nv">id: </span><span class="s">&#39;kreport-page-content&#39;</span><span class="p">)</span>

    <span class="nx">@element</span><span class="p">.</span><span class="nx">append</span> <span class="nx">@init_dialog</span><span class="p">()</span>

    <span class="nx">@page</span><span class="p">.</span><span class="nx">append</span> <span class="nx">@page_content</span>
    <span class="nx">@canvas</span><span class="p">.</span><span class="nx">append</span> <span class="nx">@page</span></pre></div>             </td>           </tr>                               <tr id="section-18">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-18">&#182;</a>               </div>               <p>Here we prepare the jquery plugins</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="nx">$</span><span class="p">(</span><span class="s">&#39;.dropdown-toggle&#39;</span><span class="p">).</span><span class="nx">dropdown</span><span class="p">()</span></pre></div>             </td>           </tr>                               <tr id="section-19">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-19">&#182;</a>               </div>               <p>Call resize once to keep each elements up...</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="nx">@resize</span><span class="p">()</span></pre></div>             </td>           </tr>                               <tr id="section-20">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-20">&#182;</a>               </div>               <p>And call it every time when window resize.</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="nx">$</span><span class="p">(</span><span class="nb">window</span><span class="p">).</span><span class="nx">resize</span> <span class="o">=&gt;</span> <span class="nx">@resize</span>

</pre></div>             </td>           </tr>                </tbody>     </table>   </div> </body> </html> 